/**
 * A jquery plugin to add Wizard functionality for Bootstrap 3 Tabs
 * Author: Jan Doll (https://www.xing.com/profile/Jan_Doll2)
 * Licensed under the MIT license
 */
if(typeof jQuery==='undefined'){console.warn('jBsWizard Warning:','Make sure jQuery is included before running jBsWizard')}(function($){'use strict';var settings;$.fn.jBsWizard=function(options){if(this.length>1){this.each(function(){$(this).jBsWizard(options)});return this}
    settings=$.extend({nextBtnStr:'Next',nextBtnAdditionalClass:'',prevBtnStr:'Previous',prevBtnAdditionalClass:'',waitASecondDelay:1000,processingFadeSpeed:'fast',useProgressBar:!0},options);var thisWizardObj=$(this);var instance=this;var _setSteps=function(){var wizardSteps=thisWizardObj.find('ul.nav-tabs li');var numOfSteps=wizardSteps.length-1;var currStepNum=0;var prevStepNum=0;var nextStepNum=1;if(wizardSteps.length){wizardSteps.each(function(i,stepEle){var stepEleObj=$(stepEle);if(stepEleObj.hasClass('active')){currStepNum=i}});if((currStepNum+1)<=numOfSteps){nextStepNum=currStepNum+1}
        if((currStepNum-1)>=0){prevStepNum=currStepNum-1}}
        settings.numOfSteps=numOfSteps;settings.currStepNum=currStepNum;settings.prevStepNum=prevStepNum;settings.nextStepNum=nextStepNum};var _setEventActions=function(){instance.on('jBsWizard.initializing',function(){instance.showProcessing()});instance.on('jBsWizard.initialized',function(){instance.hideProcessing()});instance.on('jBsWizard.prevStep',function(){instance.prevStep()});instance.on('jBsWizard.nextStep',function(){instance.nextStep()})};var _updateProgressBar=function(){var steps=instance.steps();var numOfSteps=steps.numOfSteps;var currStepNum=steps.currStepNum;var progressPercentage=(100/numOfSteps)*currStepNum;var progressBar=thisWizardObj.find('.j-bs-wizard--progress .progress-bar');if(settings.useProgressBar){progressBar.width(progressPercentage+'%').attr('aria-valuenow',progressPercentage)}};this.init=function(){if(thisWizardObj.hasClass('js-bs-wizard--initialized')){instance.destroy()}
        _setEventActions();thisWizardObj.addClass('j-bs-wizard');instance.trigger('jBsWizard.initializing',[instance]);setTimeout(function(){var stepLinks=thisWizardObj.find('ul.nav-tabs li a');$(stepLinks[0]).click();_setSteps();thisWizardObj.find('ul.nav-tabs').addClass('j-bs-wizard--steps');thisWizardObj.find('.j-bs-wizard--steps').find('li').addClass('j-bs-wizard--steps-item');thisWizardObj.find('.j-bs-wizard--steps-item').addClass('undone').find('a').attr('data-toggle','');thisWizardObj.find('.j-bs-wizard--steps-item.active').removeClass('undone').find('a').attr('data-toggle','tab');thisWizardObj.find('.tab-content').addClass('j-bs-wizard--steps-content');thisWizardObj.find('.j-bs-wizard--steps-content').find('.tab-pane').addClass('j-bs-wizard--steps-content-item');if(settings.useProgressBar){var progressBarHtml='<div class="progress j-bs-wizard--progress"><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div></div>';thisWizardObj.find('.j-bs-wizard--steps-content').prepend(progressBarHtml);_updateProgressBar()}
            var nextBtnHtml='<span class="btn btn-primary j-bs-wizard--action-btn-next pull-right '+settings.nextBtnAdditionalClass+'"><i class="j-bs-wizard--arrow j-bs-wizard--arrow-right" aria-hidden="true"></i> '+settings.nextBtnStr+'</span>';var prevBtnHtml='<span class="btn btn-default j-bs-wizard--action-btn-prev '+settings.prevBtnAdditionalClass+'"><i class="j-bs-wizard--arrow j-bs-wizard--arrow-left" aria-hidden="true"></i> '+settings.prevBtnStr+'</span>';thisWizardObj.find('.j-bs-wizard--steps-content-item').each(function(i,contentEle){var btnSetHtml='<div class="j-bs-wizard--action-btn-set clearfix">';if(i>0){btnSetHtml+=prevBtnHtml}
                if(i<settings.numOfSteps){btnSetHtml+=nextBtnHtml}
                $(contentEle).append(btnSetHtml)});thisWizardObj.find('.j-bs-wizard--action-btn-next').click(function(e){e.preventDefault();instance.trigger('jBsWizard.nextStep',[instance])});thisWizardObj.find('.j-bs-wizard--action-btn-prev').click(function(e){e.preventDefault();instance.trigger('jBsWizard.prevStep',[instance])});thisWizardObj.addClass('js-bs-wizard--initialized');instance.trigger('jBsWizard.initialized',[instance])},settings.waitASecondDelay);return instance};this.destroy=function(){instance.trigger('jBsWizard.destroy',[instance]);instance.showProcessing();settings.numOfSteps=0;settings.currStepNum=0;settings.prevStepNum=0;settings.nextStepNum=0;thisWizardObj.find('.j-bs-wizard--action-btn-next').unbind();thisWizardObj.find('.j-bs-wizard--action-btn-prev').unbind();thisWizardObj.find('.j-bs-wizard--steps-content-item .j-bs-wizard--action-btn-set').remove();$('.j-bs-wizard--progress').remove();thisWizardObj.find('.j-bs-wizard--steps-item').removeClass('undone').removeClass('done').find('a').attr('data-toggle','tab');thisWizardObj.find('.j-bs-wizard--steps li').removeClass('j-bs-wizard--steps-item');thisWizardObj.find('ul.nav-tabs').removeClass('j-bs-wizard--steps');thisWizardObj.find('.j-bs-wizard--steps-content .tab-pane').removeClass('j-bs-wizard--steps-content-item');thisWizardObj.find('.tab-content').removeClass('j-bs-wizard--steps-content');$('.j-bs-wizard--processing').remove();thisWizardObj.removeClass('j-bs-wizard').removeClass('js-bs-wizard--initialized');instance.trigger('jBsWizard.destroyed',[instance]);instance.unbind();return this};this.showProcessing=function(){var wizardProcessingElement=$('.j-bs-wizard--processing');if(!wizardProcessingElement.length&&thisWizardObj.hasClass('j-bs-wizard')){var processIndicatorHtml='<div class="j-bs-wizard--processing panel panel-default"><div class="j-bs-wizard--spinner"><div class="j-bs-wizard--spinner1 j-bs-wizard--spinner-child"></div><div class="j-bs-wizard--spinner2 j-bs-wizard--spinner-child"></div><div class="j-bs-wizard--spinner3 j-bs-wizard--spinner-child"></div><div class="j-bs-wizard--spinner4 j-bs-wizard--spinner-child"></div><div class="j-bs-wizard--spinner5 j-bs-wizard--spinner-child"></div><div class="j-bs-wizard--spinner6 j-bs-wizard--spinner-child"></div><div class="j-bs-wizard--spinner7 j-bs-wizard--spinner-child"></div><div class="j-bs-wizard--spinner8 j-bs-wizard--spinner-child"></div><div class="j-bs-wizard--spinner9 j-bs-wizard--spinner-child"></div><div class="j-bs-wizard--spinner10 j-bs-wizard--spinner-child"></div><div class="j-bs-wizard--spinner11 j-bs-wizard--spinner-child"></div><div class="j-bs-wizard--spinner12 j-bs-wizard--spinner-child"></div></div><span class="sr-only">Loading...</span></div>';thisWizardObj.append(processIndicatorHtml);wizardProcessingElement=$('.j-bs-wizard--processing')}
        if(thisWizardObj.hasClass('j-bs-wizard')&&wizardProcessingElement.length&&!wizardProcessingElement.hasClass('show')){instance.trigger('jBsWizard.showProcessing',[instance]);wizardProcessingElement.fadeTo(settings.processingFadeSpeed,1,function(){wizardProcessingElement.addClass('show');wizardProcessingElement.removeAttr('style')})}};this.hideProcessing=function(){var wizardProcessingElement=$('.j-bs-wizard--processing');if(wizardProcessingElement.length&&wizardProcessingElement.hasClass('show')){instance.trigger('jBsWizard.hideProcessing',[instance]);wizardProcessingElement.fadeTo(settings.processingFadeSpeed,0,function(){wizardProcessingElement.removeClass('show');wizardProcessingElement.removeAttr('style')})}};this.steps=function(){var steps={numOfSteps:settings.numOfSteps,currStepNum:settings.currStepNum,prevStepNum:settings.prevStepNum,nextStepNum:settings.nextStepNum};return steps};this.goToStep=function(stepNum){stepNum=typeof stepNum!=='undefined'?stepNum:0;var stepItems=$('.j-bs-wizard--steps-item');var currentStepItem=$(stepItems[settings.currStepNum]);var prevStepItem=$(stepItems[settings.prevStepNum]);var goToStepItem=null;var updateProgressBar=!1;if((stepNum>=0)&&(stepNum<=settings.numOfSteps)){goToStepItem=$(stepItems[stepNum])}
        if(goToStepItem!==null){if(stepNum!==settings.currStepNum){settings.currStepNum=stepNum;settings.prevStepNum=((stepNum-1)>=0)?stepNum-1:0;settings.nextStepNum=((stepNum+1)<=settings.numOfSteps)?stepNum+1:settings.numOfSteps;if(!goToStepItem.hasClass('done')){updateProgressBar=!0}
            goToStepItem.removeClass('undone').find('a').attr('data-toggle','tab');var goToStepItemHref=goToStepItem.find('a').attr('href');$('[href="'+goToStepItemHref+'"]').tab('show');currentStepItem.removeClass('undone').addClass('done');if(updateProgressBar){_updateProgressBar()}
            instance.trigger('jBsWizard.goToStep',[instance,instance.steps()])}}};this.nextStep=function(){instance.showProcessing();setTimeout(function(){instance.goToStep(settings.nextStepNum);instance.hideProcessing()},settings.waitASecondDelay)};this.prevStep=function(){instance.goToStep(settings.prevStepNum)};$('a[data-toggle="tab"]').on('shown.bs.tab',function(e){if($(this).parent().hasClass('undone')){}else{_setSteps()}});if($('ul.nav-tabs li').length){return instance.init()}else{console.warn('jBsWizard Error:','Cannot find Steps for init Wizard')}}}(jQuery))